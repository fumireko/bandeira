<h1 class="text-center titulo-tela my-5">Editar Produto</h1>
<div *ngIf="produto" class="well d-flex justify-content-center">
    <form #formProduto="ngForm" class="w-50">
        
        <div class="d-flex justify-content-center">
            <div class="form-group mb-3 col-6 me-3">
                <label for="nome">Descrição do produto:</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="nome" name="nome" [(ngModel)]="produto.nome" #nome="ngModel"
                    minlength="2" required>
                    <a class="btn btn-outline-dark" [href]="'https://www.google.com/search?q=' + produto.nome + '&tbm=isch'" target="_blank">
                        <i class="fa fa-search"></i>
                    </a>
                </div>
                <div *ngIf="nome.errors && (nome.dirty || nome.touched)" class="alert alert-danger">
                    <div [hidden]="!nome.errors['required']">Digite o nome do produto</div>
                    <div [hidden]="!nome.errors['minlength']">O nome deve conter pelo menos 2 caracteres.</div>
                </div>
            </div>
    
            <div class="form-group mb-3 col-6">
                <label for="preco">Preço:</label>
                <input type="number" class="form-control" id="preco" name="preco" [(ngModel)]="produto.preco"
                    #preco="ngModel" required>
                <div *ngIf="preco.errors && (preco.dirty || preco.touched)" class="alert alert-danger">
                    <div [hidden]="!preco.errors['required']">Digite o preço do produto</div>
                </div>
            </div>
        </div>

        <div class="form-group mb-3">
            <label for="categoria">Categoria:</label>
            <select class="form-select" id="categoria" name="categoria" [(ngModel)]="categoriaProdutoID" #categoria="ngModel" required>
                <option *ngFor="let categoria of categorias" [value]="categoria.id">{{categoria.descricao}}</option>
            </select>
            <div *ngIf="categoria.errors && (categoria.dirty || categoria.touched)" class="alert alert-danger">
                <div [hidden]="!categoria.errors['required']">Selecione uma categoria para o produto</div>
            </div>
        </div>

        <div class="form-group mb-3">
            <label for="imagem">Link da imagem:</label>
            <input type="text" class="form-control mb-3" id="imagem" name="imagem" [(ngModel)]="produto.imagem"
                #imagem="ngModel" (paste)="onImagePaste($event)">

            <label class="mt-3" for="imagemPreview">Prévia da imagem: </label>
            <span class="text-danger fw-bold"><img [src]="produto.imagem" class="img-fluid" alt=" Imagem inválida"></span>
        </div>
        
        <hr>

        <div class="form-group mb-3 d-flex justify-content-center row">
            <button type="sumit" class="btn-primary btn col-3 me-1"
                [disabled]="!formProduto.form.valid" (click)="atualizar()">
                <i class="fa fa-save" aria-hidden="true"></i> Atualizar
            </button>
            <a class="btn-secondary btn col-3" [routerLink]="['../../']" >
                <i class="fa fa-arrow-left" aria-hidden="true"></i> Voltar
            </a>
        </div>
    </form>
</div>